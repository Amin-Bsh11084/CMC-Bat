name: Run CMC Filter Daily

on:
  schedule:
    - cron: "0 8 * * *"   # Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª 08:00 UTC
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.11"

    - name: Install dependencies
      run: pip install -r requirements.txt

    - name: Run filter with logging
      run: |
        echo "ðŸš€ Starting cmc_filter.py..." > run_log.txt
        python cmc_filter.py >> run_log.txt 2>&1 || echo "âŒ Script failed, check logs." >> run_log.txt

    - name: Upload log file
      uses: actions/upload-artifact@v4
      with:
        name: cmc-filter-logs
        path: run_log.txt
